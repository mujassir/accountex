@using AccountEx.Common;
@section PageTitle
{
    <h1 class="font-green-sharp bold">Manage Shop Setup</h1>
}
<div class="row hidden-print hide" id="form-info">
    <div class="col-md-12 col-sm-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                    Shop Setup
                </div>
                <div class="actions">
                    <a href="javascript:;" onclick="ShopSetup.ListView()" class="btn blue">
                        <i class="fa fa-angle-left"></i>&nbsp;Back to list
                    </a>
                </div>
            </div>

            <div class="portlet">
                <div class="portlet-title">
                    <div class="caption col-md-7">
                        <i class="fa fa-edit"></i>Shop/Office Information
                    </div>
                    <div class="caption col-md-5">
                        <i class="fa fa-edit"></i>Location
                    </div>
                </div>
            </div>
            <div class="portlet-body form">

                <div id="mainform" class="form-horizontal" data-save="save">

                    <input type="text" id="Id" class="hide" data-include-in-item="true" data-item-id="" />
                    <div class="form-body">
                        <div class="hide alert alert-danger container-message">
                            <i class="close" onclick="$(this).parent().hide();"></i>
                            <strong></strong>
                            <div class="form-body message-content"></div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="col-md-4 control-label" for="prefix">Shop Code</label>
                                    <div class="col-md-6 container-voucher">
                                        <input type="text" class="form-control " id="ShopCode" data-required="required" data-message="ShopCode is required" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-4 control-label" for="prefix">Shop No.</label>
                                    <div class="col-md-6 container-voucher">
                                        <input type="text" class="form-control " id="ShopNo" data-required="required" data-message="ShopNo is required" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-4 control-label" for="prefix">Type</label>
                                    <div class="col-md-6 container-voucher">
                                        @*                                      <input type="text" class="form-control " id="Type"  data-required="required"  data-message="Type is required"  />*@
                                        <select id="Type" class="form-control select2" data-trackchange="true" data-message="Type is required">
                                            <option></option>
                                            <option>Shop</option>
                                            <option>Office</option>
                                        </select>
                                        @*<input type="hidden" id="TypeId" data-db-column="TypeId" value=""> *@
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-4 control-label master-account-label" for="prefix">Block</label>
                                    <div class="col-md-6">
                                        @*                                      <input type="text" class="form-control" id="Block"  data-plus-as-tab="false"  data-required="required" data-validate="true" data-message="Block is required" >*@
                                        <select id="BlockId" class="form-control select2" data-trackchange="true" data-required="required" data-message="Block is required">
                                            <option></option>
                                            @foreach (var item in (List<IdName>)ViewBag.Blocks)
                                            {
                                                <option value="@item.Id" data-BlockName="@item.Name">@item.Name</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-4 control-label" for="prefix">&nbsp;</label>
                                    <div class="col-md-3">
                                        <label id="LableActive" class="control-label" for="IsActive">
                                            <input type="checkbox" id="IsActive" data-checktrack='true' />
                                            Active
                                        </label>
                                    </div>


                                </div>
                                @*                                <div class="form-group">
                                        <div class="col-md-4 control-label">Measurement:</div>
                                        <label class="col-md-2 control-label" for="prefix">Length</label>
                                        <div class="col-md-3">
                                            <input id="Length" type="text" class="form-control num3" data-required="required" data-message="Length is required" >
                                        </div>Sqft
                                    </div>
                                    <div class="form-group">
                                        <div class="col-md-4"></div>
                                        <label class="col-md-2 control-label" for="prefix">Width</label>
                                        <div class="col-md-3">
                                            <input id="Width" type="text" class="form-control num3 " data-required="required" data-message="Width is required" >
                                        </div>Sqft
                                    </div>
                                     <div class="form-group">
                                        <label class="col-md-4 control-label master-account-label" for="prefix">Total Area</label>
                                        <div class="col-md-5">
                                            <input type="text" class="form-control" id="TotalArea"  data-plus-as-tab="false"  data-message="Total Area is required"  disabled="disabled">
                                        </div>Sqft
                                    </div>*@
                                <div class="form-group">
                                    <div class="col-md-4 control-label">Measurement:</div>
                                    <label class="col-md-3 control-label" for="prefix">Ground Floor</label>
                                    <div class="col-md-2">
                                        <input id="GroundFloor" type="text" class="form-control num3" data-required="required" data-message="Ground floor area is required">
                                    </div>Sqft
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4"></div>
                                    <label class="col-md-3 control-label" for="prefix">Inter Flooring</label>
                                    <div class="col-md-2">
                                        <input id="InterFlooring" type="text" class="form-control num3 " data-required="false" data-message="Width is required">
                                    </div>Sqft
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4"></div>
                                    <label class="col-md-3 control-label" for="prefix">Basement</label>
                                    <div class="col-md-2">
                                        <input id="Basement" type="text" class="form-control num3 " data-required="false" data-message="Width is required">
                                    </div>Sqft
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4"></div>
                                    <label class="col-md-3   control-label" for="prefix">1st Floor</label>
                                    <div class="col-md-2">
                                        <input id="FirstFloor" type="text" class="form-control num3 " data-required="false" data-message="Width is required">
                                    </div>Sqft
                                </div>
                                <div class="form-group">
                                    <label class="col-md-4 control-label master-account-label" for="prefix">Total</label>
                                    <div class="col-md-5">
                                        <input type="text" class="form-control" id="TotalArea" data-plus-as-tab="false" data-message="Total Area is required"  disabled="disabled">
                                    </div>Sqft
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="col-md-3 control-label" for="prefix">North</label>
                                    <div class="col-md-6">
                                        <input class="form-control" type="text" name="text" id="North" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 control-label" for="prefix">East</label>
                                    <div class="col-md-6">
                                        <input class="form-control" type="text" name="text" id="East" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 control-label" for="prefix">West</label>
                                    <div class="col-md-6">
                                        <input class="form-control" type="text" name="text" id="West" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 control-label" for="prefix">South</label>
                                    <div class="col-md-6">
                                        <input class="form-control" type="text" name="text" id="South" />
                                    </div>
                                </div>
                                @*                                 <div class="form-group">
                                        <label class="col-md-2 control-label" for="prefix"></label>
                                        <div class="col-md-7">
                                            <div class="form-group">

                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <input id="Documents" accept="image/x-png, image/gif, image/jpeg" type="file" name="...">
                                                        <input type="text" id="FileUrl" class="hide" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>*@
                            </div>
                        </div>
                        <h3>Upload Files</h3>
                        <form id="fileupload" action="../Handlers/FileUpload.ashx?directory=ShopDocuments" method="POST" enctype="multipart/form-data">
                            <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
                            <div class="col-md-2"></div>
                            <div class="row fileupload-buttonbar">
                                <div class="col-lg-7">
                                    <!-- The fileinput-button span is used to style the file input field as button -->
                                    <span class="btn green fileinput-button">
                                        <i class="fa fa-plus"></i>
                                        <span>Add files... </span>
                                        <input type="file" name="files[]" multiple="">
                                    </span>
                                    <button type="submit" class="btn blue start hide">
                                        <i class="fa fa-upload"></i>
                                        <span>Start upload </span>
                                    </button>
                                    <button type="reset" class="btn warning cancel">
                                        <i class="fa fa-ban-circle"></i>
                                        <span>Cancel upload </span>
                                    </button>
                                    <button type="button" class="btn red delete">
                                        <i class="fa fa-trash"></i>
                                        <span>Delete </span>
                                    </button>
                                    <input type="checkbox" class="toggle">
                                    <!-- The global file processing state -->
                                    <span class="fileupload-process"></span>
                                </div>
                                <!-- The global progress information -->
                                <div class="col-lg-5 fileupload-progress fade">
                                    <!-- The global progress bar -->
                                    <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                                        <div class="progress-bar progress-bar-success" style="width: 0%;">
                                        </div>
                                    </div>
                                    <!-- The extended global progress information -->
                                    <div class="progress-extended">
                                        &nbsp;
                                    </div>
                                </div>
                            </div>
                            <!-- The table listing the files available for upload/download -->
                            <table role="presentation" class="table table-striped clearfix">
                                <tbody class="files"></tbody>
                            </table>
                        </form>
                        <div class="form-actions">
                            <label class="col-md-2 control-label" for="prefix">&nbsp;</label>
                            <div class="col-md-8">
                                <button type="button" class="btn btn-primary" onclick="ShopSetup.Save()">Save</button>
                                <button id="btnCancel" type="button" class="btn btn-default" onclick="ShopSetup.ListView()">Cancel</button>
                            </div>
                        </div>


                    </div>
                </div>
                <!-- END EXAMPLE TABLE PORTLET-->
            </div>

        </div>
    </div>
</div>
<div class="row hidden-print hide" id="div-table">
    <div class="col-md-12 col-sm-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-list"></i>Shops Listing
                </div>

                <div class="actions">
                    <button id="btnEdit" type="button" class="btn blue" onclick="ShopSetup.Add()"><i class="fa fa-plus"></i>&nbsp;New</button>


                </div>
                <div class="tools hide">
                    <a href="javascript:;" class="collapse"></a>
                </div>
            </div>
            <div class="portlet-body">
                <div class="hide alert alert-danger container-message">
                    <i class="close" onclick="$(this).parent().hide();"></i>
                    <strong></strong>
                    <div class="form-body message-content"></div>
                </div>
                <table class="table table-striped table-bordered table-hover" id="mainTable">
                    <thead>
                        <tr>
                            <th>Shop Code</th>
                            <th>Shop No</th>
                            <th>Block</th>
                            <th>Total Area</th>
                            <th style="width: 75px;" class="no-sort"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7">Loading...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- END EXAMPLE TABLE PORTLET-->
    </div>

</div>
<script id="template-upload" type="text/x-tmpl">
    {% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td>
            <span class="preview"></span>
        </td>
        <td>
            <p class="name">{%=file.name%}</p>
            <strong class="error text-danger label label-danger"></strong>
        </td>
        <td>
            <p class="size">Processing...</p>
            <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                <div class="progress-bar progress-bar-success" style="width:0%;"></div>
            </div>
        </td>
        <td>
            {% if (!i && !o.options.autoUpload) { %}
            <button class="btn blue start" disabled>
                <i class="fa fa-upload"></i>
                <span>Start</span>
            </button>
            {% } %}
            {% if (!i) { %}
            <button class="btn red cancel">
                <i class="fa fa-ban"></i>
                <span>Cancel</span>
            </button>
            {% } %}
        </td>
    </tr>
    {% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
    {% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        <td>
            <span class="preview">
                {% if (file.ThumbnailUrl) { %}
                <a href="../Upload/ShopDocuments/{%=file.Url%}" title="{%=file.Name%}" download="{%=file.Name%}" data-gallery><img src="../Upload/ShopDocuments/{%=file.ThumbnailUrl%}"></a>
                {% } %}
            </span>
        </td>
        <td>
            <p class="name">
                {% if (file.Url) { %}
                <a href="../Upload/ShopDocuments/{%=file.Url%}" title="{%=file.Name%}" download="{%=file.Name%}" {%=file.ThumbnailUrl?'data-gallery':''%}>{%=file.Name%}</a>
                {% } else { %}
                <span>{%=file.Name%}</span>
                {% } %}
            </p>
            {% if (file.error) { %}
            <div><span class="label label-danger">Error</span> {%=file.error%}</div>
            {% } %}
        </td>
        <td>
            <span class="Size">{%=file.Size%}</span>
        </td>
        <td>
            {% if (file.DeleteUrl) { %}
            <button class="btn red delete btn-sm" data-type="{%=file.deleteType%}" data-url="{%=file.DeleteUrl%}" {% if (file.deleteWithCredentials) { %} data-xhr-fields='{"withCredentials":true}' {% } %}>
                <i class="fa fa-trash-o"></i>
                <span>Delete</span>
            </button>
            <input type="checkbox" name="delete" value="1" class="toggle">
            {% } else { %}
            <button class="btn yellow cancel btn-sm">
                <i class="fa fa-ban"></i>
                <span>Cancel</span>
            </button>
            {% } %}
        </td>
        <td class="hide">
            <input class="data" data-file="{%=JSON.stringify(file)%}" type="hidden" />

        </td>
    </tr>
    {% } %}
</script>
@section FooterScript
{
@Styles.Render("~/Content/Themes/cs/plugin/fileupload")
@Scripts.Render("~/content/scripts/plugin/fileupload")
<script src="~/Content/metronic/assets/pages/scripts/form-fileupload.js"></script>
    <script src="~/Content/AppJS/RentalSystem/ShopSetup.js"></script>
    <script>
        jQuery(document).ready(function () {
            FormFileUpload.init();
            ShopSetup.init();
        });
    </script>
}
